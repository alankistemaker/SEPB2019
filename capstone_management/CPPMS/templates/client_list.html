{% extends "client.html" %}

{% block sub-page_content %}
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" type="text/css" media="all" /> <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"> </script> <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js" type="text/javascript"></script>



      <div class="search-container" style="position:absolute; top:100px; left:15%; height:70px; width:60%; font-family:Segoe UI">
        <form method="POST" >{% csrf_token %}
          <p style="color:#FFFFFF; font-size:24px"><strong>Search: </strong>
          <input id="txtSearch" name="client_list" type="text" style="width:70%; font-size:20px" placeholder="Filter by client id, client name..." value="{{ filter_value }}">
           
          <button type="submit"><i class="fas fa-search" style="font-size:20px"></i></button></p>

<script>
        $(document).ready(function(){ 
            $("#txtSearch").autocomplete({
                source: "/CPPMS/ajax_calls/search/",
                minLength: 1,
                open: function(){
                    setTimeout(function () {
                        $('.ui-autocomplete').css('z-index', 99);
                    }, 0);
                }
              });        });</script>



        </form>
      </div>
      
      <table border="3" style="position:absolute; top:160px; left:15%; width:85%; font-family:Segoe UI; font-size:16px">
        <tr style="text-align:center; background-color:#C0C0C0">
          <th style="width:10%"><strong>CLIENT ID</strong></th>
          <th style="width:25%"><strong>CLIENT NAME</strong></th>
          <th style="width:25%"><strong>COMPANY</strong></th>
          <th style="width:15%"><strong>CONTACT NAME</strong></th>
          <th style="width:25%"><strong>DEPARTMENT</strong></th>
        </tr>
        {% for client in client_filter %}
        <tr style="text-align:right">
          <td><a href="client_detail/{{client.pk}}">{{ client.pk }}</a></td>
          <td>{{ client }}</td>
          <td>{{ client.department.company }}</td>
          <td>{{ client.contact }}</td>
          <td>{{ client.contact.department }}</td>
        </tr>
        {% endfor %}
      </table>

{% endblock %}